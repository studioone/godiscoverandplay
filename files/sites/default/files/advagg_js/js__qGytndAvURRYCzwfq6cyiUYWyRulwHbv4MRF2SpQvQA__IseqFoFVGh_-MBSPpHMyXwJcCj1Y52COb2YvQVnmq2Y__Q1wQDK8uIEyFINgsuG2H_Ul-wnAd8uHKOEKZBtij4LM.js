/* Source and licensing information for the line(s) below can be found at http://godiscoverandplay.com/misc/jquery.ba-bbq.js. */
(function($,p){var i,m=Array.prototype.slice,r=decodeURIComponent,a=$.param,c,l,v,b=$.bbq=$.bbq||{},q,u,j,e=$.event.special,d="hashchange",A="querystring",D="fragment",y="elemUrlAttr",g="location",k="href",t="src",x=/^.*\?|#.*$/g,w=/^.*\#/,h,C={}
function E(F){return typeof F==="string"}
function B(G){var F=m.call(arguments,1);return function(){return G.apply(this,F.concat(m.call(arguments)))}}
function n(F){return F.replace(/^[^#]*#?(.*)$/,"$1")}
function o(F){return F.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}
function f(H,M,F,I,G){var O,L,K,N,J;if(I!==i){K=F.match(H?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);J=K[3]||"";if(G===2&&E(I)){L=I.replace(H?w:x,"")}else{N=l(K[2]);I=E(I)?l[H?D:A](I):I;L=G===2?I:G===1?$.extend({},I,N):$.extend({},N,I);L=a(L);if(H)L=L.replace(h,r)};O=K[1]+(H?"#":L||!K[1]?"?":"")+L+J}else O=M(F!==i?F:p[g][k]);return O};a[A]=B(f,0,o);a[D]=c=B(f,1,n);c.noEscape=function(G){G=G||"";var F=$.map(G.split(""),encodeURIComponent);h=new RegExp(F.join("|"),"g")};c.noEscape(",/");$.deparam=l=function(I,F){var H={},G={"true":!0,"false":!1,"null":null};$.each(I.replace(/\+/g," ").split("&"),function(L,Q){var K=Q.split("="),P=r(K[0]),J,O=H,M=0,R=P.split("]["),N=R.length-1;if(/\[/.test(R[0])&&/\]$/.test(R[N])){R[N]=R[N].replace(/\]$/,"");R=R.shift().split("[").concat(R);N=R.length-1}else N=0;if(K.length===2){J=r(K[1]);if(F)J=J&&!isNaN(J)?+J:J==="undefined"?i:G[J]!==i?G[J]:J;if(N){for(;M<=N;M++){P=R[M]===""?O.length:R[M];O=O[P]=M<N?O[P]||(R[M+1]&&isNaN(R[M+1])?{}:[]):J}}else if($.isArray(H[P])){H[P].push(J)}else if(H[P]!==i){H[P]=[H[P],J]}else H[P]=J}else if(P)H[P]=F?i:""});return H}
function z(H,F,G){if(F===i||typeof F==="boolean"){G=F;F=a[H?D:A]()}else F=E(F)?F.replace(H?w:x,""):F;return l(F,G)};l[A]=B(z,0);l[D]=v=B(z,1);$[y]||($[y]=function(F){return $.extend(C,F)})({a:k,base:k,iframe:t,img:t,input:t,form:"action",link:k,script:t});j=$[y]
function s(I,G,H,F){if(!E(H)&&typeof H!=="object"){F=H;H=G;G=i};return this.each(function(){var L=$(this),J=G||j()[(this.nodeName||"").toLowerCase()]||"",K=J&&L.attr(J)||"";L.attr(J,a[I](K,H,F))})};$.fn[A]=B(s,A);$.fn[D]=B(s,D);b.pushState=q=function(I,F){if(E(I)&&/^#/.test(I)&&F===i)F=2;var H=I!==i,G=c(p[g][k],H?I:{},H?F:2);p[g][k]=G+(/#/.test(G)?"":"#")};b.getState=u=function(F,G){return F===i||typeof F==="boolean"?v(F):v(G)[F]};b.removeState=function(F){var G={};if(F!==i){G=u();$.each($.isArray(F)?F:arguments,function(I,H){delete G[H]})};q(G,2)};e[d]=$.extend(e[d],{add:function(F){var H
function G(J){var I=J[D]=c();J.getState=function(K,L){return K===i||typeof K==="boolean"?l(I,K):l(I,L)[K]};H.apply(this,arguments)};if($.isFunction(F)){H=F;return G}else{H=F.handler;F.handler=G}}})})(jQuery,this);(function($,i,b){var j,k=$.event.special,c="location",d="hashchange",l="href",f=$.browser,g=document.documentMode,h=f.msie&&(g===b||g<8),e="on"+d in i&&!h
function a(m){m=m||i[c][l];return m.replace(/^[^#]*#?(.*)$/,"$1")};$[d+"Delay"]=100;k[d]=$.extend(k[d],{setup:function(){if(e)return false;$(j.start)},teardown:function(){if(e)return false;$(j.stop)}});j=(function(){var m={},r,n,o,q
function p(){o=q=function(s){return s};if(h){n=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;q=function(){return a(n.document[c][l])};o=function(u,s){if(u!==s){var t=n.document;t.open().close();t[c].hash="#"+u}};o(a())}};m.start=function(){if(r)return;var t=a();o||p();(function s(){var v=a(),u=q(t);if(v!==t){o(t=v,u);$(i).trigger(d)}else if(u!==t)i[c][l]=i[c][l].replace(/#.*/,"")+"#"+u;r=setTimeout(s,$[d+"Delay"])})()};m.stop=function(){if(!n){r&&clearTimeout(r);r=0}};return m})()})(jQuery,this);
/* Source and licensing information for the above line(s) can be found at http://godiscoverandplay.com/misc/jquery.ba-bbq.js. */
/* Source and licensing information for the line(s) below can be found at http://godiscoverandplay.com/modules/overlay/overlay-parent.js. */
(function($){Drupal.behaviors.overlayParent={attach:function(context,settings){if(Drupal.overlay.isOpen)Drupal.overlay.makeDocumentUntabbable(context);if(this.processed)return;this.processed=true;$(window).bind('hashchange.drupal-overlay',$.proxy(Drupal.overlay,'eventhandlerOperateByURLFragment')).triggerHandler('hashchange.drupal-overlay');$(document).bind('click.drupal-overlay mouseup.drupal-overlay',$.proxy(Drupal.overlay,'eventhandlerOverrideLink'))}};Drupal.overlay=Drupal.overlay||{isOpen:false,isOpening:false,isClosing:false,isLoading:false};Drupal.overlay.prototype={};Drupal.overlay.open=function(url){if(this.isOpen||this.isOpening)return this.load(url);this.isOpening=true;this.originalTitle=document.title;this.create();this.isOpening=false;this.isOpen=true;$(document.documentElement).addClass('overlay-open');this.makeDocumentUntabbable();$(document).trigger('drupalOverlayOpen');return this.load(url)};Drupal.overlay.create=function(){this.$container=$(Drupal.theme('overlayContainer')).appendTo(document.body);this.activeFrame=this.$iframeA=$(Drupal.theme('overlayElement')).appendTo(this.$container);this.inactiveFrame=this.$iframeB=$(Drupal.theme('overlayElement')).appendTo(this.$container);this.$iframeA.bind('load.drupal-overlay',{self:this.$iframeA[0],sibling:this.$iframeB},$.proxy(this,'loadChild'));this.$iframeB.bind('load.drupal-overlay',{self:this.$iframeB[0],sibling:this.$iframeA},$.proxy(this,'loadChild'));var eventClass='.drupal-overlay.drupal-overlay-open';$(window).bind('resize'+eventClass,$.proxy(this,'eventhandlerOuterResize'));$(document).bind('drupalOverlayLoad'+eventClass,$.proxy(this,'eventhandlerOuterResize')).bind('drupalOverlayReady'+eventClass+' drupalOverlayClose'+eventClass,$.proxy(this,'eventhandlerSyncURLFragment')).bind('drupalOverlayClose'+eventClass,$.proxy(this,'eventhandlerRefreshPage')).bind('drupalOverlayBeforeClose'+eventClass+' drupalOverlayBeforeLoad'+eventClass+' drupalOverlayResize'+eventClass,$.proxy(this,'eventhandlerDispatchEvent'));if($('.overlay-displace-top, .overlay-displace-bottom').length)$(document).bind('drupalOverlayResize'+eventClass,$.proxy(this,'eventhandlerAlterDisplacedElements')).bind('drupalOverlayClose'+eventClass,$.proxy(this,'eventhandlerRestoreDisplacedElements'))};Drupal.overlay.load=function(url){if(!this.isOpen)return false;$(document).trigger('drupalOverlayBeforeLoad');$(document.documentElement).addClass('overlay-loading');var iframeDocument=this.inactiveFrame[0].contentDocument||this.inactiveFrame[0].contentWindow.document;iframeDocument.location.replace(url);return true};Drupal.overlay.close=function(){if(!this.isOpen||this.isClosing)return false;var event=$.Event('drupalOverlayBeforeClose');$(document).trigger(event);if(event.isDefaultPrevented())return false;this.isClosing=true;this.isOpen=false;$(document.documentElement).removeClass('overlay-open');document.title=this.originalTitle;this.makeDocumentTabbable();$(document).trigger('drupalOverlayClose');if(!this.isLoading){this.destroy();this.isClosing=false};return true};Drupal.overlay.destroy=function(){$([document,window]).unbind('.drupal-overlay-open');this.$container.remove();this.$container=null;this.$iframeA=null;this.$iframeB=null;this.iframeWindow=null};Drupal.overlay.redirect=function(url){var link=$(url.link(url)).get(0);if(window.location.href==link.href)$(window).triggerHandler('hashchange.drupal-overlay');window.location.href=link.href;return true};Drupal.overlay.bindChild=function(iframeWindow,isClosing){this.iframeWindow=iframeWindow;if(isClosing||this.isClosing||!this.isOpen)return;$(document).trigger('drupalOverlayReady')};Drupal.overlay.loadChild=function(event){var iframe=event.data.self,iframeDocument=iframe.contentDocument||iframe.contentWindow.document,iframeWindow=iframeDocument.defaultView||iframeDocument.parentWindow;if(iframeWindow.location=='about:blank')return;this.isLoading=false;$(document.documentElement).removeClass('overlay-loading');event.data.sibling.removeClass('overlay-active').attr({tabindex:-1});if(this.isOpen&&!this.isClosing){if(iframeWindow.Drupal&&iframeWindow.Drupal.overlayChild){document.title=iframeWindow.document.title;this.activeFrame=$(iframe).addClass('overlay-active').attr('title',Drupal.t('@title dialog',{'@title':iframeWindow.jQuery('#overlay-title').text()})).removeAttr('tabindex');this.inactiveFrame=event.data.sibling;(this.inactiveFrame[0].contentDocument||this.inactiveFrame[0].contentWindow.document).location.replace('about:blank');this.activeFrame.focus();var skipLink=iframeWindow.jQuery('a:first');Drupal.overlay.setFocusBefore(skipLink,iframeWindow.document);$(document).trigger('drupalOverlayLoad')}else window.location=iframeWindow.location.href.replace(/([?&]?)render=overlay&?/g,'$1').replace(/\?$/,'')}else this.destroy()};Drupal.overlay.setFocusBefore=function($element,document){var placeholder=document.createElement('a'),$placeholder=$(placeholder).addClass('element-invisible').attr('href','#');$placeholder.insertBefore($element);$placeholder.focus();$placeholder.one('blur',function(){$(this).remove()})};Drupal.overlay.isAdminLink=function(url){if(Drupal.overlay.isExternalLink(url))return false;var path=this.getPath(url);if(!this.adminPathRegExp){var prefix='';if(Drupal.settings.overlay.pathPrefixes.length)prefix='('+Drupal.settings.overlay.pathPrefixes.join('/|')+'/|)';var adminPaths='^'+prefix+'('+Drupal.settings.overlay.paths.admin.replace(/\s+/g,'|')+')$',nonAdminPaths='^'+prefix+'('+Drupal.settings.overlay.paths.non_admin.replace(/\s+/g,'|')+')$';adminPaths=adminPaths.replace(/\*/g,'.*');nonAdminPaths=nonAdminPaths.replace(/\*/g,'.*');this.adminPathRegExp=new RegExp(adminPaths);this.nonAdminPathRegExp=new RegExp(nonAdminPaths)};return this.adminPathRegExp.exec(path)&&!this.nonAdminPathRegExp.exec(path)};Drupal.overlay.isExternalLink=function(url){var re=RegExp('^((f|ht)tps?:)?//(?!'+window.location.host+')');return re.test(url)};Drupal.overlay.eventhandlerOuterResize=function(event){if(!(this.isOpen||this.isOpening)||this.isClosing||!this.iframeWindow)return;if(typeof document.body.style.maxHeight!='string')this.activeFrame.height($(window).height());$(document).trigger('drupalOverlayResize')};Drupal.overlay.eventhandlerAlterDisplacedElements=function(event){if(!(this.isOpen||this.isOpening)||this.isClosing||!this.iframeWindow)return;$(this.iframeWindow.document.body).css({marginTop:Drupal.overlay.getDisplacement('top'),marginBottom:Drupal.overlay.getDisplacement('bottom')}).addClass('overlay-trigger-reflow').removeClass('overlay-trigger-reflow');var documentHeight=this.iframeWindow.document.body.clientHeight,documentWidth=this.iframeWindow.document.body.clientWidth,maxWidthName=(typeof document.body.style.maxWidth=='string')?'maxWidth':'width';if(Drupal.overlay.leftSidedScrollbarOffset===undefined&&$(document.documentElement).attr('dir')==='rtl')if($.browser.opera){Drupal.overlay.leftSidedScrollbarOffset=document.documentElement.clientWidth-this.iframeWindow.document.documentElement.clientWidth+this.iframeWindow.document.documentElement.clientLeft}else if(this.iframeWindow.document.documentElement.clientLeft){Drupal.overlay.leftSidedScrollbarOffset=this.iframeWindow.document.documentElement.clientLeft}else{var el1=$('<div style="direction: rtl; overflow: scroll;"></div>').appendTo(document.body),el2=$('<div></div>').appendTo(el1);Drupal.overlay.leftSidedScrollbarOffset=parseInt(el2[0].offsetLeft-el1[0].offsetLeft);el1.remove()};$('.overlay-displace-top, .overlay-displace-bottom').each(function(){var data=$(this).data(),maxWidth=documentWidth;if(this.filters&&this.filters.length&&this.filters.item('DXImageTransform.Microsoft.Shadow'))maxWidth-=1;if(Drupal.overlay.leftSidedScrollbarOffset)$(this).css('left',Drupal.overlay.leftSidedScrollbarOffset);var currentMaxWidth=parseInt($(this).css(maxWidthName));if((data.drupalOverlay&&data.drupalOverlay.maxWidth)||isNaN(currentMaxWidth)||currentMaxWidth>maxWidth||currentMaxWidth<=0){$(this).css(maxWidthName,maxWidth);(data.drupalOverlay=data.drupalOverlay||{}).maxWidth=true};var offset=$(this).offset(),offsetRight=offset.left+$(this).outerWidth();if((data.drupalOverlay&&data.drupalOverlay.clip)||offsetRight>maxWidth){if(Drupal.overlay.leftSidedScrollbarOffset){$(this).css('clip','rect(auto, auto, '+(documentHeight-offset.top)+'px, '+(Drupal.overlay.leftSidedScrollbarOffset+2)+'px)')}else $(this).css('clip','rect(auto, '+(maxWidth-offset.left)+'px, '+(documentHeight-offset.top)+'px, auto)');(data.drupalOverlay=data.drupalOverlay||{}).clip=true}})};Drupal.overlay.eventhandlerRestoreDisplacedElements=function(event){var $displacedElements=$('.overlay-displace-top, .overlay-displace-bottom');try{$displacedElements.css({maxWidth:'',clip:''})}catch(err){$displacedElements.attr('style',function(index,attr){return attr.replace(/clip\s*:\s*rect\([^)]+\);?/i,'')})}};Drupal.overlay.eventhandlerOverrideLink=function(event){if((event.type=='click'&&event.button==2)||(event.type=='mouseup'&&event.button!=2))return;var $target=$(event.target);if(!$target.is('a')){$target=$target.closest('a');if(!$target.length)return};if($target.hasClass('overlay-exclude'))return;if($target.hasClass('overlay-close')){$.bbq.removeState('overlay');return};var target=$target[0],href=target.href;if(href!=undefined&&href!=''&&target.protocol.match(/^https?\:/)){var anchor=href.replace(target.ownerDocument.location.href,'');if(anchor.length==0||anchor.charAt(0)=='#'){return}else if(this.isAdminLink(href)){var parentLocation=($target.hasClass('overlay-restore')&&typeof $.bbq.getState('overlay-context')=='string')?Drupal.settings.basePath+$.bbq.getState('overlay-context'):null;href=this.fragmentizeLink($target.get(0),parentLocation);if(event.button==0&&!event.altKey&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey){this.redirect(href);return false}else $target.one('blur mousedown',{target:target,href:target.href},function(event){$(event.data.target).attr('href',event.data.href)}).attr('href',href)}else if(this.isOpen&&target.ownerDocument===this.iframeWindow.document)if(target.hostname!=window.location.hostname){if(!$target.attr('target'))$target.attr('target','_parent')}else{if($target[0].hash);else $target.attr('href',$.param.fragment(href,{'overlay-context':this.getPath(window.location)+window.location.search}));var params=$.deparam.querystring(href);if(params.destination&&this.isAdminLink(params.destination)){var fragmentizedDestination=$.param.fragment(this.getPath(window.location),{overlay:params.destination});$target.attr('href',$.param.querystring(href,{destination:fragmentizedDestination}))};if(!$target.attr('target'))$target.attr('target','_parent')}}};Drupal.overlay.eventhandlerOperateByURLFragment=function(event){if($.data(window.location,window.location.href)==='redirect'){$.data(window.location,window.location.href,null);return};var state=$.bbq.getState('overlay');if(state){var url=$.param.querystring(Drupal.settings.basePath+state,{render:'overlay'});this.open(url);this.resetActiveClass(this.getPath(Drupal.settings.basePath+state))}else if(this.isOpen&&!this.isClosing){this.close();this.resetActiveClass(this.getPath(window.location))}};Drupal.overlay.eventhandlerSyncURLFragment=function(event){if(this.isOpen){var expected=$.bbq.getState('overlay');if(this.getPath(Drupal.settings.basePath+expected)!=this.getPath(this.iframeWindow.document.location)){var newLocation=Drupal.overlay.fragmentizeLink(this.iframeWindow.document.location);$.data(window.location,newLocation,'redirect');window.location.replace(newLocation)}}else $.bbq.removeState('overlay')};Drupal.overlay.eventhandlerRefreshPage=function(event){if(Drupal.overlay.refreshPage)window.location.reload(true)};Drupal.overlay.eventhandlerDispatchEvent=function(event){if(this.iframeWindow&&this.iframeWindow.document)this.iframeWindow.jQuery(this.iframeWindow.document).trigger(event)};Drupal.overlay.fragmentizeLink=function(link,parentLocation){var params=$.deparam.fragment(link.href);if(params.overlay)return link.href;var path=this.getPath(link,true),destination=path+link.search.replace(/&?render=overlay/,'').replace(/\?$/,'')+link.hash;return $.param.fragment(parentLocation||window.location.href,{overlay:destination})};Drupal.overlay.refreshRegions=function(data){$.each(data,function(){var region_info=this;$.each(region_info,function(regionClass){var regionName=region_info[regionClass],regionSelector='.'+regionClass;Drupal.detachBehaviors($(regionSelector));$.get(Drupal.settings.basePath+Drupal.settings.overlay.ajaxCallback+'/'+regionName,function(newElement){$(regionSelector).replaceWith($(newElement));Drupal.attachBehaviors($(regionSelector),Drupal.settings)})})})};Drupal.overlay.resetActiveClass=function(activePath){var self=this,windowDomain=window.location.protocol+window.location.hostname;$('.overlay-displace-top, .overlay-displace-bottom').find('a[href]').removeClass('active').each(function(){var linkDomain=this.protocol+this.hostname,linkPath=self.getPath(this);if(linkDomain==windowDomain&&(activePath+'/').indexOf(linkPath+'/')===0&&(linkPath!==''||activePath===''))$(this).addClass('active')})};Drupal.overlay.getPath=function(link,ignorePathFromQueryString){if(typeof link=='string')link=$(link.link(link)).get(0);var path=link.pathname;if(path.charAt(0)!='/')path='/'+path;path=path.replace(new RegExp(Drupal.settings.basePath+'(?:index.php)?'),'');if(path==''&&!ignorePathFromQueryString){var match=new RegExp('([?&])q=(.+)([&#]|$)').exec(link.search);if(match&&match.length==4)path=match[2]};return path};Drupal.overlay.getDisplacement=function(region){var displacement=0,lastDisplaced=$('.overlay-displace-'+region+':last');if(lastDisplaced.length){displacement=lastDisplaced.offset().top+lastDisplaced.outerHeight();var cssBoxShadowValue=lastDisplaced.css('box-shadow'),boxShadow=(typeof cssBoxShadowValue!=='undefined'&&cssBoxShadowValue!=='none');if(!boxShadow&&/DXImageTransform\.Microsoft\.Shadow/.test(lastDisplaced.css('filter'))){displacement-=lastDisplaced[0].filters.item('DXImageTransform.Microsoft.Shadow').strength;displacement=Math.max(0,displacement)}};return displacement};Drupal.overlay.makeDocumentUntabbable=function(context){if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<8){$('#overlay-disable-message a',context).attr('tabindex',-1);return};context=context||document.body;var $overlay,$tabbable,$hasTabindex;$hasTabindex=$('[tabindex] :not(.overlay-element)',context);$hasTabindex.each(Drupal.overlay._recordTabindex);Drupal.overlay._hasTabindex=$hasTabindex.add(Drupal.overlay._hasTabindex);$tabbable=$('a, area, button, input, object, select, textarea, iframe');$tabbable=$tabbable.add($hasTabindex);$overlay=$('.overlay-element, #overlay-container, .overlay-displace-top, .overlay-displace-bottom').find('*');$tabbable=$tabbable.not($overlay);$tabbable.attr('tabindex',-1)};Drupal.overlay.makeDocumentTabbable=function(context){if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<8)return;var $needsTabindex;context=context||document.body;var $tabindex=$('[tabindex]',context);if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<8){var i,length=$tabindex.length;for(i=0;i<length;i++)$tabindex[i].removeAttribute('tabIndex')}else $tabindex.removeAttr('tabindex');$needsTabindex=$(Drupal.overlay._hasTabindex,context);$needsTabindex.each(Drupal.overlay._restoreTabindex);Drupal.overlay._hasTabindex=Drupal.overlay._hasTabindex.not($needsTabindex)};Drupal.overlay._recordTabindex=function(){var $element=$(this),tabindex=$(this).attr('tabindex');$element.data('drupalOverlayOriginalTabIndex',tabindex)};Drupal.overlay._restoreTabindex=function(){var $element=$(this),tabindex=$element.data('drupalOverlayOriginalTabIndex');$element.attr('tabindex',tabindex)};Drupal.theme.prototype.overlayContainer=function(){return'<div id="overlay-container"><div class="overlay-modal-background"></div></div>'};Drupal.theme.prototype.overlayElement=function(url){return'<iframe class="overlay-element" frameborder="0" scrolling="auto" allowtransparency="true"></iframe>'}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://godiscoverandplay.com/modules/overlay/overlay-parent.js. */
/* Source and licensing information for the line(s) below can be found at http://godiscoverandplay.com/modules/contextual/contextual.js. */
(function($){Drupal.contextualLinks=Drupal.contextualLinks||{};Drupal.behaviors.contextualLinks={attach:function(context){$('div.contextual-links-wrapper',context).once('contextual-links',function(){var $wrapper=$(this),$region=$wrapper.closest('.contextual-links-region'),$links=$wrapper.find('ul.contextual-links'),$trigger=$('<a class="contextual-links-trigger" href="#" />').text(Drupal.t('Configure')).click(function(){$links.stop(true,true).slideToggle(100);$wrapper.toggleClass('contextual-links-active');return false});$trigger.add($links).hover(function(){$region.addClass('contextual-links-region-active')},function(){$region.removeClass('contextual-links-region-active')});$region.bind('mouseleave click',Drupal.contextualLinks.mouseleave);$region.hover(function(){$trigger.addClass('contextual-links-trigger-active')},function(){$trigger.removeClass('contextual-links-trigger-active')});$wrapper.prepend($trigger)})}};Drupal.contextualLinks.mouseleave=function(){$(this).find('.contextual-links-active').removeClass('contextual-links-active').find('ul.contextual-links').hide()}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://godiscoverandplay.com/modules/contextual/contextual.js. */
/* Source and licensing information for the line(s) below can be found at http://godiscoverandplay.com/misc/jquery.cookie.js. */
jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1};var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1e3))}else f=m.expires;e="; expires="+f.toUTCString()};var l=m.path?"; path="+(m.path):"",g=m.domain?"; domain="+(m.domain):"",a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}};return d}};
/* Source and licensing information for the above line(s) can be found at http://godiscoverandplay.com/misc/jquery.cookie.js. */
/* Source and licensing information for the line(s) below can be found at http://godiscoverandplay.com/profiles/openpublish/modules/contrib/views/js/jquery.ui.dialog.patch.js. */
(function($,undefined){if($.ui&&$.ui.dialog)$.ui.dialog.overlay.events=$.map('focus,keydown,keypress'.split(','),function(event){return event+'.dialog-overlay'}).join(' ')}(jQuery));
/* Source and licensing information for the above line(s) can be found at http://godiscoverandplay.com/profiles/openpublish/modules/contrib/views/js/jquery.ui.dialog.patch.js. */
/* Source and licensing information for the line(s) below can be found at http://godiscoverandplay.com/misc/ajax.js. */
(function($){Drupal.ajax=Drupal.ajax||{};Drupal.behaviors.AJAX={attach:function(context,settings){for(var base in settings.ajax)if(!$('#'+base+'.ajax-processed').length){var element_settings=settings.ajax[base];if(typeof element_settings.selector=='undefined')element_settings.selector='#'+base;$(element_settings.selector).each(function(){element_settings.element=this;Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings)});$('#'+base).addClass('ajax-processed')};$('.use-ajax:not(.ajax-processed)').addClass('ajax-processed').each(function(){var element_settings={};element_settings.progress={type:'throbber'};if($(this).attr('href')){element_settings.url=$(this).attr('href');element_settings.event='click'};var base=$(this).attr('id');Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings)});$('.use-ajax-submit:not(.ajax-processed)').addClass('ajax-processed').each(function(){var element_settings={};element_settings.url=$(this.form).attr('action');element_settings.setClick=true;element_settings.event='click';element_settings.progress={type:'throbber'};var base=$(this).attr('id');Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings)})}};Drupal.ajax=function(base,element,element_settings){var defaults={url:'system/ajax',event:'mousedown',keypress:true,selector:'#'+base,effect:'none',speed:'none',method:'replaceWith',progress:{type:'throbber',message:Drupal.t('Please wait...')},submit:{js:true}};$.extend(this,defaults,element_settings);this.element=element;this.element_settings=element_settings;this.url=element_settings.url.replace(/\/nojs(\/|$|\?|&|#)/g,'/ajax$1');this.wrapper='#'+element_settings.wrapper;if(this.element.form)this.form=$(this.element.form);var ajax=this;ajax.options={url:ajax.url,data:ajax.submit,beforeSerialize:function(element_settings,options){return ajax.beforeSerialize(element_settings,options)},beforeSubmit:function(form_values,element_settings,options){ajax.ajaxing=true;return ajax.beforeSubmit(form_values,element_settings,options)},beforeSend:function(xmlhttprequest,options){ajax.ajaxing=true;return ajax.beforeSend(xmlhttprequest,options)},success:function(response,status){if(typeof response=='string')response=$.parseJSON(response);return ajax.success(response,status)},complete:function(response,status){ajax.ajaxing=false;if(status=='error'||status=='parsererror')return ajax.error(response,ajax.url)},dataType:'json',type:'POST'};$(ajax.element).bind(element_settings.event,function(event){return ajax.eventResponse(this,event)});if(element_settings.keypress)$(ajax.element).keypress(function(event){return ajax.keypressResponse(this,event)});if(element_settings.prevent)$(ajax.element).bind(element_settings.prevent,false)};Drupal.ajax.prototype.keypressResponse=function(element,event){var ajax=this;if(event.which==13||(event.which==32&&element.type!='text'&&element.type!='textarea')){$(ajax.element_settings.element).trigger(ajax.element_settings.event);return false}};Drupal.ajax.prototype.eventResponse=function(element,event){var ajax=this;if(ajax.ajaxing)return false;try{if(ajax.form){if(ajax.setClick)element.form.clk=element;ajax.form.ajaxSubmit(ajax.options)}else{ajax.beforeSerialize(ajax.element,ajax.options);$.ajax(ajax.options)}}catch(e){ajax.ajaxing=false;alert("An error occurred while attempting to process "+ajax.options.url+": "+e.message)};if(typeof element.type!='undefined'&&(element.type=='checkbox'||element.type=='radio')){return true}else return false};Drupal.ajax.prototype.beforeSerialize=function(element,options){if(this.form){var settings=this.settings||Drupal.settings;Drupal.detachBehaviors(this.form,settings,'serialize')};options.data['ajax_html_ids[]']=[];$('[id]').each(function(){options.data['ajax_html_ids[]'].push(this.id)});options.data['ajax_page_state[theme]']=Drupal.settings.ajaxPageState.theme;options.data['ajax_page_state[theme_token]']=Drupal.settings.ajaxPageState.theme_token;for(var key in Drupal.settings.ajaxPageState.css)options.data['ajax_page_state[css]['+key+']']=1;for(var key in Drupal.settings.ajaxPageState.js)options.data['ajax_page_state[js]['+key+']']=1};Drupal.ajax.prototype.beforeSubmit=function(form_values,element,options){};Drupal.ajax.prototype.beforeSend=function(xmlhttprequest,options){if(this.form){options.extraData=options.extraData||{};options.extraData.ajax_iframe_upload='1';var v=$.fieldValue(this.element);if(v!==null)options.extraData[this.element.name]=v};$(this.element).addClass('progress-disabled').attr('disabled',true);if(this.progress.type=='bar'){var progressBar=new Drupal.progressBar('ajax-progress-'+this.element.id,eval(this.progress.update_callback),this.progress.method,eval(this.progress.error_callback));if(this.progress.message)progressBar.setProgress(-1,this.progress.message);if(this.progress.url)progressBar.startMonitoring(this.progress.url,this.progress.interval||1500);this.progress.element=$(progressBar.element).addClass('ajax-progress ajax-progress-bar');this.progress.object=progressBar;$(this.element).after(this.progress.element)}else if(this.progress.type=='throbber'){this.progress.element=$('<div class="ajax-progress ajax-progress-throbber"><div class="throbber">&nbsp;</div></div>');if(this.progress.message)$('.throbber',this.progress.element).after('<div class="message">'+this.progress.message+'</div>');$(this.element).after(this.progress.element)}};Drupal.ajax.prototype.success=function(response,status){if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.element).removeClass('progress-disabled').removeAttr('disabled');Drupal.freezeHeight();for(var i in response)if(response.hasOwnProperty(i)&&response[i]['command']&&this.commands[response[i]['command']])this.commands[response[i]['command']](this,response[i],status);if(this.form){var settings=this.settings||Drupal.settings;Drupal.attachBehaviors(this.form,settings)};Drupal.unfreezeHeight();this.settings=null};Drupal.ajax.prototype.getEffect=function(response){var type=response.effect||this.effect,speed=response.speed||this.speed,effect={};if(type=='none'){effect.showEffect='show';effect.hideEffect='hide';effect.showSpeed=''}else if(type=='fade'){effect.showEffect='fadeIn';effect.hideEffect='fadeOut';effect.showSpeed=speed}else{effect.showEffect=type+'Toggle';effect.hideEffect=type+'Toggle';effect.showSpeed=speed};return effect};Drupal.ajax.prototype.error=function(response,uri){alert(Drupal.ajaxError(response,uri));if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.wrapper).show();$(this.element).removeClass('progress-disabled').removeAttr('disabled');if(this.form){var settings=response.settings||this.settings||Drupal.settings;Drupal.attachBehaviors(this.form,settings)}};Drupal.ajax.prototype.commands={insert:function(ajax,response,status){var wrapper=response.selector?$(response.selector):$(ajax.wrapper),method=response.method||ajax.method,effect=ajax.getEffect(response),new_content_wrapped=$('<div></div>').html(response.data),new_content=new_content_wrapped.contents();if(new_content.length!=1||new_content.get(0).nodeType!=1)new_content=new_content_wrapped;switch(method){case'html':case'replaceWith':case'replaceAll':case'empty':case'remove':var settings=response.settings||ajax.settings||Drupal.settings;Drupal.detachBehaviors(wrapper,settings)};wrapper[method](new_content);if(effect.showEffect!='show')new_content.hide();if($('.ajax-new-content',new_content).length>0){$('.ajax-new-content',new_content).hide();new_content.show();$('.ajax-new-content',new_content)[effect.showEffect](effect.showSpeed)}else if(effect.showEffect!='show')new_content[effect.showEffect](effect.showSpeed);if(new_content.parents('html').length>0){var settings=response.settings||ajax.settings||Drupal.settings;Drupal.attachBehaviors(new_content,settings)}},remove:function(ajax,response,status){var settings=response.settings||ajax.settings||Drupal.settings;Drupal.detachBehaviors($(response.selector),settings);$(response.selector).remove()},changed:function(ajax,response,status){if(!$(response.selector).hasClass('ajax-changed')){$(response.selector).addClass('ajax-changed');if(response.asterisk)$(response.selector).find(response.asterisk).append(' <span class="ajax-changed">*</span> ')}},alert:function(ajax,response,status){alert(response.text,response.title)},css:function(ajax,response,status){$(response.selector).css(response.argument)},settings:function(ajax,response,status){if(response.merge){$.extend(true,Drupal.settings,response.settings)}else ajax.settings=response.settings},data:function(ajax,response,status){$(response.selector).data(response.name,response.value)},invoke:function(ajax,response,status){var $element=$(response.selector);$element[response.method].apply($element,response.arguments)},restripe:function(ajax,response,status){$('> tbody > tr:visible, > tr:visible',$(response.selector)).removeClass('odd even').filter(':even').addClass('odd').end().filter(':odd').addClass('even')}}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://godiscoverandplay.com/misc/ajax.js. */
